
  <div class="search-bar">
    <%= form_tag offers_path, method: :get do |f| %>
      <div class="input-group ">
            <%= text_field_tag :address,
              params[:address],
              placeholder: "Adresse",
              class: "form-control",
              id: "search"
            %>
            <%= number_field_tag :radius,
              params[:radius],
              placeholder: "Rayon de recherche (km)",
              min: 1,
              max: 20,
              class: "form-control",
              id: "radius-form"
            %>

            <%= select_tag "product",
            options_from_collection_for_select(@products, "id", "product_type", params[:product]),
            prompt: "Choisissez votre produit",
            class: "custom-select inputgroupperso",
            id: "inputGroupSelect04"
          %>

            <%= number_field_tag :quantity,
              params[:quantity],
              placeholder: "Quantit√©",
              min: 1,
              max: 200,
              class: "form-control",
              id: "quantity-form"
            %>

            <%= number_field_tag :price,
              params[:price],
              placeholder: "Prix max par produit",
              min: 1,
              max: 20,
              class: "form-control",
              id: "price-form"
            %>
          <div class="input-group-append">
            <%= submit_tag "Search", class: "btn btn-outline-primary" %>
          </div>
      </div>
    <% end %>
  </div>



  <div id="map"
       style="width: 100%; height: 600px;"
       data-markers="<%= @markers.to_json %>"
       data-center="<%= @marker_center.to_json %>"
       data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>">
  </div>


  <div class="call-to-action text-align-center">

    <% if @product.present? && params[:quantity] == "" &&  @stock == 1 %>
      <p> <strong> <%= @stock%> </strong> <%= @product.product_type %> disponible. </p>
    <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
      class: "btn btn-primary btn-call" %>

    <% elsif @product.present? && params[:quantity] == "" && @stock > 1 %>
   <p> <strong> <%= @stock%> </strong> <%= @product.product_type %>s disponibles. </p>
    <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
    class: "btn btn-primary btn-call" %>

    <% elsif @product.present? && params[:quantity] == "" && @stock == 0  %>
    <p><strong> <%= @stock%> </strong> <%= @product.product_type %>s disponible. Il n'y a pas sufisamment de <%= @product.product_type  %>s disponibles autour de vous, cliquez ici pour demander de l'aide autour de vous!</p>
    <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
    class: "btn btn-primary btn-call" %>

    <% elsif @product.present? && params[:quantity].present? && @stock < params[:quantity].to_i %>
    <p><strong> <%= @stock%> </strong> <%= @product.product_type %>s disponible... Cliquez ici pour demander de l'aide autour de vous!</p>
   <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
    class: "btn btn-primary btn-call" %>

    <% elsif @product.present? && params[:quantity].present? && @stock >= params[:quantity].to_i %>
      <p><strong> <%= @stock%> </strong> <%= @product.product_type %>s disponible! Bonne nouvelle, il y a assez de <%= @product.product_type %>s autour de vous!</p>
   <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
     class: "btn btn-primary btn-call" %>

    <% elsif @product.present? && params[:quantity].present? && @stock == 0  %>
    <p><strong> <%= @stock%> </strong> <%= @product.product_type %>s disponible. Il n'y a pas sufisamment de <%= @product.product_type  %>s disponibles autour de vous, cliquez ici pour demander de l'aide autour de vous!</p>
    <%= link_to "Cr√©er un projet",
    new_project_path(project:
      { product_id: params[:product],
      quantity: params[:quantity]
      },
      offers_id: @offersgeoco.pluck(:id),
      price: params[:price]
      ),
    class: "btn btn-primary btn-call" %>

    <% else %>
    <p> Veuillez nous en dire plus sur votre recherche s'il vous pla√Æt üßê</p>
  <% end %>
 </div>
