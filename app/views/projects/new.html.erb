<div class="container">
  <div class="row m-3 justify-content-center">
    <h1>Mon projet</h1>
  </div>

    <hr>

  <div class="row pt-3">
    <div class="recap_project col-6">
      <h5>Récapitulatif du besoin</h5>
      <%= simple_form_for @project do |f| %>
        <%= f.association :product,
          collection: Product.all.map {|product| product.product_type.capitalize},
          selected: f.object.product.product_type.capitalize || @project.product.product_type.capitalize %>
        <%= f.input :quantity, input_html: {value: f.object.quantity || @project.quantity } %>
        <%= f.input :budget, input_html: {value: f.object.budget || @project.budget } %>
        <%= f.label "j'ai une deadline", class: "btn-outline-primary", id: "btn-project-datepicker" %>
        <div class="d-none" id="project-deadline">
          <%= f.input :deadline, as: :string, required: false, input_html: {class: "datepicker"} %>
        </div>
        <!-- add notion of stocks -->
        <p>blablabla sur les stocks</p>
        <p>
          <%= image_tag "real-estate.svg", width: "5%", alt: "autre" %>
          Mon adresse :
        </p>
        <%= current_user.address %>
        <div class="submit-project mt-3 mb-1">
          <%= f.submit class: 'btn btn-primary'%>
          <%= f.button :button, "Cancel", type: "reset", class: "btn btn-outline-primary" %>
        </div>
      <% end %>
    </div>

    <!-- display le recap si et seulement si des personnes sont dispos -->
    <% if @offers.present? %>
    <!-- recheck si la boucle fonctionne bien - recherche montigny par ex -->
      <div class="recap_collab col-6">
        <h5>En créant votre projet, vous sollicitez leur aide</h5>
        <div class="list-group">
          <% @offers.each do |offer| %>
            <li class="list-group-item flex-column align-items-start">
              <div class="d-flex w-100 justify-content-between">
                <h5 class="mb-1"><%= image_tag "https://kitt.lewagon.com/placeholder/users/cveneziani", class: "avatar-small", alt: "avatar" %> <%= "#{offer.user.nickname}" %></h5>
                <small><%= "#{offer.price} €/unité" %></small>
              </div>
              <p class="mb-1">
                <% if offer.product.product_type == "masque" %>
                  <%= image_tag "https://image.flaticon.com/icons/svg/2947/2947803.svg", width: "5%", alt: "masque" %>
                <% elsif offer.product.product_type == "blouse" %>
                  <%= image_tag "https://image.flaticon.com/icons/png/512/2246/2246297.png", width: "5%", alt: "blouse" %>
                <% else %>
                  <%= image_tag "crochet.svg", width: "5%", alt: "autre" %>
                <% end %>
                <strong><%= " x #{offer.quantity}" %></strong>
              </p>
              <p class="mb-1"><%= offer.description.capitalize %></p>
              <small><%= offer.user.address %></small>
            </li>
          <% end %>
        </div>
      </div>
    <% end %>

  </div>
</div>
